---

- hosts: localhost
  tags: always
  become: true
  pre_tasks:
    - name: pre-run | update package cache (arch)
      tags: always
      pacman: update_cache=yes
      changed_when: False
      when: ansible_distribution == "Archlinux"

    - name: pre-run | update package cache (fedora)
      tags: always
      dnf: update_cache=yes
      changed_when: False
      when: ansible_distribution == "Fedora"

    - name: pre-run | update package cache (debian, etc)
      tags: always
      apt: update_cache=yes
      changed_when: False
      when: ansible_distribution in ["Debian", "Ubuntu"]

- hosts: localhost # running the playbook against the host machine
  connection: local #use local connection -> no ssh
  become: true # using sudo

  tasks:
# Python environment
  - name: install python environment
    package:
      name:
        - python3-numpy
        - python3-scipy
        - python3-matplotlib
        - python3-ipython
        - python3-pandas
        - python3-sympy
        - python3-nose
        - atlas-devel
        - python3-psutil
        - python3-notebook

  - name: installing qutip with pip (not working at the moment)
    pip:
      name:
        - qutip
      state: absent

  - name: install htop and nvim
    package:
      name:
        - htop
        - neovim

  - block:
    ## User configs
    - import_tasks: tasks/users/mose.yml

  ## desktop environments
    - include_tasks: tasks/desktop_environments/gnome/appearance.yml

    - include_tasks: tasks/desktop_environments/gnome/keybindings.yml

    - include_tasks: tasks/desktop_environments/gnome/nautilus.yml

    - include_tasks: tasks/desktop_environments/gnome/terminal.yml

#    ## install software
#    - import_tasks: software/audacious.yml
#    - import_tasks: software/audacity.yml
#    - import_tasks: software/authy.yml
#    - import_tasks: software/bitwarden.yml
#    - import_tasks: software/caffeine.yml
#    - import_tasks: software/codecs.yml
#    - import_tasks: software/boto.yml
#    - import_tasks: software/chromium.yml
#    - import_tasks: software/darktable.yml
#    - import_tasks: software/firefox.yml
#    - import_tasks: software/foliate.yml
#    - import_tasks: software/google_chrome.yml
#    - import_tasks: software/glimpse.yml
#    - import_tasks: software/kdenlive.yml
#    - import_tasks: software/keepassxc.yml
#    - import_tasks: software/libreoffice.yml
#    - import_tasks: software/linode-cli.yml
#    - import_tasks: software/lutris.yml
#    - import_tasks: software/mattermost.yml
#    - import_tasks: software/minecraft.yml
#    - import_tasks: software/misc_games.yml
#    - import_tasks: software/misc_packages.yml
#    - import_tasks: software/openshot.yml
#    - import_tasks: software/packer.yml
#    - import_tasks: software/signal.yml
#    - import_tasks: software/solaar.yml
#    - import_tasks: software/spotify.yml
#    - import_tasks: software/steam.yml
#    - import_tasks: software/syncthing.yml
#    - import_tasks: software/terraform.yml
#    - import_tasks: software/thunderbird.yml
#    - import_tasks: software/todoist.yml
#    - import_tasks: software/ulauncher.yml
#    - import_tasks: software/vagrant.yml
#    - import_tasks: software/virtualbox.yml
#    - import_tasks: software/vivaldi.yml
#    - import_tasks: software/vlc.yml
#    - import_tasks: software/xonotic.yml

