# Config files
- name: config files
  block:
    - name: users | mose | create personal config directories
      tags: dotfiles,dotfiles-mose
      file:
        path: /home/mose/{{ item.dir }}
        state: directory
        owner: mose
        group: mose
        mode: 0700
      with_items:
        - { dir: .config }
        - { dir: .config/autostart }
        - { dir: .config/nvim }
        - { dir: ../../root/.config }
        - { dir: ../../root/.config/nvim }
        - { dir: .local }
        - { dir: .local/share }
        - { dir: .local/share/applications }
        - { dir: .tmux }

    - name: users | mose | copy personal config files
      copy:
        src: users/mose/{{ item.src }}
        dest: /home/mose/{{ item.dest }}
        owner: mose
        group: mose
        mode: 0600
      with_items:
        - { src: 'git-prompt.sh', dest: '.git-prompt.sh'}
        - { src: 'tmux/tmux.conf', dest: '.tmux.conf'}
        - { src: 'tmux/tmux-first-unattached-session', dest: '.tmux/'}
        - { src: 'bashrc', dest: '.bashrc'}
        - { src: 'vimrc', dest: '.vimrc' }
        - { src: 'gitconfig', dest: '.gitconfig' }
        - { src: 'tlp.conf', dest: '../../etc/tlp.conf' }

    - name: users | mose | copy executable files
      copy:
        src: users/mose/{{ item.src }}
        dest: /home/mose/{{ item.dest }}
        owner: mose
        group: mose
        mode: a+x
      with_items:
        - { src: 'tmux/tmux-first-unattached-session', dest: '.tmux/'}

    - name: users | mose | create symbolic links
      file:
        src: /home/mose/{{ item.src }}
        dest: /home/mose/{{ item.dest }}
        state: link
      with_items:
        - { src: '.vimrc', dest: '.config/nvim/init.vim'}
        - { src: '.vimrc', dest: '../../root/.config/nvim/init.vim'}

    - name: users | mose | clone tmux plugin manager repository
      git:
        repo: https://github.com/tmux-plugins/tpm.git
        dest: /home/mose/.tmux/plugins/tpm
  when: personal_config is defined and personal_config == true


